コードを確認しました。**2つの`ontrack`が重複している**ことが問題です。

## 🎯 **修正箇所の特定**

**745行目付近**にある以下の部分を**削除**してください：

```javascript
pc.ontrack = (event) => {
  const stream = event.streams[0];
  if (!stream) return;

  const track = stream?.getVideoTracks?.()[0];
  console.log("🎥 映像を受信 from", fromUID);  // ← ここでエラーが出ている
  console.log("📺 stream:", stream);
  console.log("📺 videoTrack state:", track?.readyState);
  console.log("📺 videoTrack enabled:", track?.enabled);
  console.log("📺 videoTrack label:", track?.label);
  console.log("📺 stream track count:", stream.getTracks().length);

  const videoGrid = document.getElementById("videoGrid");
  videoGrid.style.display = "flex";

  let remoteStream = remoteStreams[fromUID];
  let remoteVideo = document.querySelector(`video[data-user-id="${fromUID}"]`);

  if (!remoteStream) {
    remoteStream = new MediaStream();
    remoteStreams[fromUID] = remoteStream;
  }

  if (!remoteVideo) {
    remoteVideo = document.createElement("video");
    remoteVideo.setAttribute("data-user-id", fromUID);
    remoteVideo.autoplay = true;
    remoteVideo.playsInline = true;
    remoteVideo.muted = true; // autoplay対策
    remoteVideo.style.width = "200px";
    remoteVideo.style.height = "150px";
    remoteVideo.style.margin = "10px";
    videoGrid.appendChild(remoteVideo);
  }

  remoteVideo.srcObject = remoteStream;

  stream.getTracks().forEach(track => {
    remoteStream.addTrack(track);
  });

  remoteVideo.play().catch(err => console.warn("⚠️ play() 失敗:", err));
};
```

## 📋 **修正手順**

1. **745行目付近**の`pc.ontrack = (event) => {`から始まる部分を探す
2. **対応する`};`まで**（上記のコード全体）を**削除**
3. **580行目付近の別の`pc.ontrack`は残す**（こちらが修正済みの正しいバージョン）

## ✅ **残すべき正しい`pc.ontrack`**

**580行目付近**にある以下は残してください：
```javascript
pc.ontrack = (event) => {
  const stream = event.streams[0];
  if (!stream) return;

  // 🔧 修正：remoteUIDを正しく特定
  const remoteUID = Object.keys(peerConnections).find(uid => peerConnections[uid] === pc) || 'unknown';
  // ... 正しい処理
};
```

この修正で、重複する`ontrack`が削除され、エラーが解決されて相手のカメラが表示されるはずです！
